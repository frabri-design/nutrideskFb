<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guida Setup Airtable - NutriDesk FB</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #0F1A33 0%, #1e3a5f 100%);
            color: #333;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #0F1A33;
            border-bottom: 4px solid #E8B49A;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 {
            color: #0F1A33;
            margin-top: 40px;
            border-left: 5px solid #E8B49A;
            padding-left: 15px;
        }
        h3 {
            color: #E8B49A;
            margin-top: 25px;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            color: #0F1A33;
        }
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #E8B49A;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #0F1A33;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        .step {
            background: #FBF0ED;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #E8B49A;
        }
        .success {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .warning {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        ol, ul {
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Guida Setup Airtable - NutriDesk FB</h1>
        
        <p>Questa guida ti accompagna passo-passo nella creazione del tuo database Airtable per gestire pazienti e visite.</p>

        <h2>üéØ STEP 1 - Crea la Base Airtable</h2>
        <div class="step">
            <ol>
                <li>Vai su <strong>https://airtable.com</strong> e crea un account gratuito</li>
                <li>Clicca <strong>"Create a base"</strong> ‚Üí <strong>"Start from scratch"</strong></li>
                <li>Rinomina la base: <strong>"NutriDesk Database"</strong></li>
            </ol>
        </div>

        <h2>üìã STEP 2 - Tabella PAZIENTI</h2>
        
        <h3>Rinomina la prima tabella</h3>
        <p>Clicca su "Table 1" ‚Üí Rinomina in <strong>"Pazienti"</strong></p>

        <h3>Aggiungi questi campi (clicca + per aggiungere colonne):</h3>
        
        <table>
            <thead>
                <tr>
                    <th>Nome campo</th>
                    <th>Tipo</th>
                    <th>Note</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Nome Cognome</strong></td>
                    <td>Single line text</td>
                    <td>Campo principale</td>
                </tr>
                <tr>
                    <td><strong>Data di nascita</strong></td>
                    <td>Date</td>
                    <td>Formato italiano</td>
                </tr>
                <tr>
                    <td><strong>Altezza</strong></td>
                    <td>Number</td>
                    <td>Integer (es. 170 cm)</td>
                </tr>
                <tr>
                    <td><strong>Stato</strong></td>
                    <td>Single select</td>
                    <td>Opzioni: <em>Attivo</em>, <em>Concluso</em></td>
                </tr>
                <tr>
                    <td><strong>Allergie / Intolleranze / Patologie / Esami</strong></td>
                    <td>Long text</td>
                    <td>Campo libero</td>
                </tr>
                <tr>
                    <td><strong>Note</strong></td>
                    <td>Long text</td>
                    <td>Obiettivi, annotazioni</td>
                </tr>
                <tr>
                    <td><strong>Visite</strong></td>
                    <td>Link to another record</td>
                    <td>Collegamento (creerai dopo)</td>
                </tr>
            </tbody>
        </table>

        <h2>üè• STEP 3 - Tabella VISITE</h2>
        
        <div class="step">
            <ol>
                <li>Clicca <strong>+ Add table</strong> in basso</li>
                <li>Rinomina in <strong>"Visite"</strong></li>
                <li>Aggiungi i campi dalla tabella sotto</li>
            </ol>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Nome campo</th>
                    <th>Tipo</th>
                    <th>Note</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Paziente</strong></td>
                    <td>Link to another record</td>
                    <td>Collega a "Pazienti"</td>
                </tr>
                <tr>
                    <td><strong>Data visita</strong></td>
                    <td>Date</td>
                    <td>Formato italiano</td>
                </tr>
                <tr>
                    <td><strong>Peso</strong></td>
                    <td>Number</td>
                    <td>Decimale (es. 75.5 kg)</td>
                </tr>
                <tr>
                    <td><strong>BMI</strong></td>
                    <td>Formula</td>
                    <td>Calcolato automaticamente</td>
                </tr>
                <tr>
                    <td><strong>Circonferenze</strong></td>
                    <td>Long text</td>
                    <td>Campo libero</td>
                </tr>
                <tr>
                    <td><strong>Note visita</strong></td>
                    <td>Long text</td>
                    <td>Annotazioni</td>
                </tr>
            </tbody>
        </table>

        <h3>Formula BMI (campo "BMI"):</h3>
        <div class="warning">
            <strong>‚ö†Ô∏è Importante:</strong> Copia questa formula ESATTAMENTE come √® scritta
        </div>
        <pre><code>IF(
  AND({Peso}, LOOKUP("Altezza", {Paziente})),
  ROUND({Peso} / POWER(LOOKUP("Altezza", {Paziente}) / 100, 2), 1),
  BLANK()
)</code></pre>

        <h2>üîÑ STEP 4 - Campi Automatici (Pazienti)</h2>
        
        <p>Torna alla tabella <strong>Pazienti</strong> e aggiungi questi campi automatici:</p>

        <h3>1. Data ultima visita (Rollup)</h3>
        <div class="step">
            <ul>
                <li><strong>Type:</strong> Rollup</li>
                <li><strong>Link to record:</strong> Visite</li>
                <li><strong>Field:</strong> Data visita</li>
                <li><strong>Aggregation:</strong> MAX(values)</li>
            </ul>
        </div>

        <h3>2. Numero visite (Rollup)</h3>
        <div class="step">
            <ul>
                <li><strong>Type:</strong> Rollup</li>
                <li><strong>Link to record:</strong> Visite</li>
                <li><strong>Field:</strong> Data visita</li>
                <li><strong>Aggregation:</strong> COUNTA(values)</li>
            </ul>
        </div>

        <h3>3. Giorni dall'ultima visita (Formula)</h3>
        <pre><code>IF(
  {Data ultima visita},
  DATETIME_DIFF(TODAY(), {Data ultima visita}, 'days'),
  0
)</code></pre>

        <h2>üîê STEP 5 - Ottieni l'API Key</h2>
        
        <div class="warning">
            <strong>‚ö†Ô∏è Conserva questa chiave in modo sicuro!</strong> La vedrai solo una volta.
        </div>

        <div class="step">
            <ol>
                <li>Vai su <strong>https://airtable.com/create/tokens</strong></li>
                <li>Clicca <strong>"Create new token"</strong></li>
                <li>Nome: <strong>"NutriDesk App"</strong></li>
                <li>Scopes: seleziona <code>data.records:read</code> e <code>data.records:write</code></li>
                <li>Access: seleziona la tua base "NutriDesk Database"</li>
                <li>Clicca <strong>"Create token"</strong></li>
                <li><strong>COPIA IL TOKEN</strong> e salvalo in un posto sicuro</li>
            </ol>
        </div>

        <h2>üÜî STEP 6 - Trova il BASE ID</h2>
        
        <div class="step">
            <ol>
                <li>Vai alla tua base Airtable</li>
                <li>Guarda l'URL nella barra del browser:<br>
                    <code>https://airtable.com/<strong>appXXXXXXXXXX</strong>/...</code></li>
                <li>La parte <code><strong>appXXXXXXXXXX</strong></code> √® il tuo <strong>BASE ID</strong></li>
                <li>Copialo e salvalo insieme all'API Key</li>
            </ol>
        </div>

        <div class="success">
            <h3>‚úÖ Complimenti! Hai finito!</h3>
            <p>Hai creato con successo:</p>
            <ul>
                <li>‚úÖ Tabella Pazienti con campi automatici</li>
                <li>‚úÖ Tabella Visite con BMI calcolato</li>
                <li>‚úÖ Collegamento tra le tabelle</li>
                <li>‚úÖ API Key per la sincronizzazione</li>
            </ul>
        </div>

        <h2>üì± Prossimi Passi</h2>
        
        <ol>
            <li>Inizia ad inserire i tuoi pazienti su Airtable</li>
            <li>Aggiungi le visite per ogni paziente</li>
            <li>I campi automatici (numero visite, giorni dall'ultima visita, BMI) si aggiorneranno da soli!</li>
            <li>La sincronizzazione con l'app sar√† disponibile a breve</li>
        </ol>

        <div class="warning">
            <h3>üîí Note sulla Privacy</h3>
            <p>Ricorda che sei responsabile del trattamento dei dati dei tuoi pazienti secondo il GDPR. Airtable offre strumenti conformi, ma devi:</p>
            <ul>
                <li>Non condividere l'API Key con nessuno</li>
                <li>Usare password sicure per l'account Airtable</li>
                <li>Informare i pazienti sul trattamento dei dati</li>
            </ul>
        </div>

        <hr style="margin: 40px 0; border: none; border-top: 2px solid #E8B49A;">
        
        <p style="text-align: center; color: #666; font-size: 14px;">
            <strong>NutriDesk FB</strong> - La tua nutrizionista in tasca<br>
            Per supporto: <a href="https://airtable.com/support" style="color: #E8B49A;">Documentazione Airtable</a>
        </p>
    </div>
</body>
</html>
